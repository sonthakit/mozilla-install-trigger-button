<?xml version="1.0" encoding="UTF-8" ?>
<!-- =====================================================================================
	Mozilla Install Trigger Button by Sonthakit Leelahanon.
	Gadget URL
	http://mozilla-install-trigger-button.googlecode.com/svn/trunk/mozilla-install-trigger-button.xml
	Example Image Source = data:image/png;base64,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
	Button is "free install" text
====================================================================================== -->

<Module>
	<ModulePrefs title="Mozilla Install Trigger Button" author="Sonthakit Leelahanon" height="30"/>
	<UserPref name="url" display_name="URL" required="true" />
	<UserPref name="hash" display_name="SHA1 Hash" required="true" />
	<UserPref name="imgSrc" display_name="Image Source" required="true" />
	<Content type="html">
		<![CDATA[
			<div id=content_div></div>
			<script type="application/javascript">
				var prefs = new gadgets.Prefs();
				var prefUrl = prefs.getString("url");
				var prefHash = "sha1:" + prefs.getString("hash");
				var prefImgSrc = prefs.getString("imgSrc");
				document.getElementById("content_div").innerHTML = "<img src='" + prefImgSrc + "' onclick='return install(event);'></img>";
				function install (aEvent) {
					try {
						for (var a = aEvent.target; a.href === undefined;) a = a.parentNode;
						var params = {
							"Foo": {
								URL: prefUrl,
								Hash: prefHash,
								toString: function () { return this.URL; }
							}
						};
						InstallTrigger.install(params);
						return false;
					} catch(e) {
					}
				}
			</script>
		]]>
	</Content>
</Module>
